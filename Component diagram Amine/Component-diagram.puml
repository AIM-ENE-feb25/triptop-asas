@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
title Component Diagram – TripTop Backend

Container(frontend, "Frontend", "React, JavaScript", "Stelt gebruikers in staat om reizen te plannen, boeken, beheren en betalen")

System_Boundary(backendSystem, "Backend [Java, Spring Boot]") {
    Component(loginController, "Login Controller", "Spring MVC", "Verwerkt inlogverzoeken")
    Component(paymentController, "Payment Controller", "Spring MVC", "Verwerkt betalingsverzoeken")
    Component(tripController, "Trip Controller", "Spring MVC", "Verwerkt reisplanningsverzoeken")

    Component(loginService, "Login Service", "Spring Service", "Behandelt authenticatie en inloglogica")
    Component(paymentService, "Payment Service", "Spring Service", "Behandelt betalingsverwerking")
    Component(tripService, "Trip Service", "Spring Service", "Beheert reisplanning en -informatie")

    Component(userRepository, "User Repository", "Spring Data JPA", "Slaat gebruikersgegevens op")
    Component(tripRepository, "Trip Repository", "Spring Data JPA", "Slaat complete trip-aggregaten op (inclusief boekingen)")
    Component(paymentRepository, "payment Repository", "Spring Data JPA", "Slaat betalingen op")




}

Container(database, "Database", "?", "Slaat reizen, bouwstenen en gebruikersgegevens op")

System_Ext(identity_provider, "WireMock API", "Simuleert centrale identiteitsverificatie en SSO")
System_Ext(payment_provider, "Stripe API", "Faciliteert veilige online betalingstransacties")
System_Ext(booking, "Booking API", "Biedt toegang tot accommodaties, boekingsmogelijkheden en autoverhuur")
System_Ext(vervoer_services, "NS API", "Levert real-time reisinformatie voor treinreizen")
System_Ext(routeplanner_service, "Maps API", "Biedt geavanceerde routeplanning en alternatieve reisopties")
System_Ext(activiteiten_services, "Tripadvisor API", "Verstrekt informatie over lokale attracties, excursies en bezienswaardigheden")
System_Ext(eten_services, "UberEats API", "Biedt een overzicht van restaurants, cafés en andere eet-/drinkmogelijkheden")

    Rel(loginService, identity_provider, "Authenticeert gebruikers", "REST/JSON")
    Rel(paymentService, payment_provider, "Verwerkt betalingen", "REST/JSON")

    Rel(tripService, booking, "Haalt boekingsmogelijkheden op en boekt", "REST/JSON")
    Rel(tripService, vervoer_services, "Haalt reisinformatie (trein) op", "REST/JSON")

    Rel(tripService, routeplanner_service, "Haalt routes op", "REST/JSON")
    Rel(tripService, activiteiten_services, "Haalt activiteiten/excursies op", "REST/JSON")
    Rel(tripService, eten_services, "Haalt eet-/drinkmogelijkheden op", "REST/JSON")
    Rel(frontend, loginController, "Stuurt inlogverzoeken", "HTTPS")
    Rel(frontend, paymentController, "Stuurt betalingsverzoeken", "HTTPS")
    Rel(frontend, tripController, "Stuurt reisplanningsverzoeken", "HTTPS")

    Rel(tripRepository,database,"Leest/ Schrijft naar")
    Rel(userRepository,database,"Leest/ Schrijft naar")
    Rel(loginController, loginService, "Stuurt inlogverzoeken", "JSON/HTTP")
    Rel(paymentController, paymentService, "Stuurt betalingsverzoeken", "JSON/HTTP")
    Rel(tripController, tripService, "Stuurt reisplanningsverzoeken", "JSON/HTTP")

    Rel(loginService, userRepository, "Leest/schrijft gebruikersdata", "JDBC/SQL")
    Rel(tripService, tripRepository, "Leest/schrijft tripdata", "JDBC/SQL")
    Rel(paymentService, paymentRepository, "Leest/schrijft betalingsdata", "JDBC/SQL")
    Rel(paymentRepository,database,"Leest/ Schrijft naar")



@enduml
